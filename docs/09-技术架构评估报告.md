# SuperAdmin æŠ€æœ¯æ¶æ„è¯„ä¼°æŠ¥å‘Š

**é¡¹ç›®åç§°**: SuperAdmin v2.3.3
**è¯„ä¼°æ—¥æœŸ**: 2025-10-26
**è¯„ä¼°äºº**: æ¶æ„å¸ˆ
**é¡¹ç›®ç±»å‹**: ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿ

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

### æ•´ä½“è¯„ä»·
SuperAdmin æ˜¯ä¸€ä¸ªåŸºäºç°ä»£æŠ€æœ¯æ ˆæ„å»ºçš„**ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿ**ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚é¡¹ç›®æ•´ä½“æ¶æ„æ¸…æ™°ï¼ŒæŠ€æœ¯é€‰å‹åˆç†ï¼Œå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

### æ ¸å¿ƒä¼˜åŠ¿
- âœ… **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: Vue 3.5.22 + ThinkPHP 8.1 + TypeScript 5.7
- âœ… **åˆ†å±‚æ¶æ„æ¸…æ™°**: MVC + Service å±‚ï¼ŒèŒè´£æ˜ç¡®
- âœ… **å®‰å…¨æœºåˆ¶å®Œå–„**: JWTè®¤è¯ã€é™æµã€CSRFé˜²æŠ¤ã€XSSè¿‡æ»¤
- âœ… **æœåŠ¡å±‚è®¾è®¡**: BaseService æä¾›ç»Ÿä¸€çš„ CRUD æ“ä½œ
- âœ… **å‰ç«¯å·¥ç¨‹åŒ–**: Vite + TypeScript + Pinia + ç»„ä»¶åŒ–å¼€å‘

### ä¸»è¦é—®é¢˜
- âš ï¸ **æµ‹è¯•è¦†ç›–ä¸è¶³**: ç¼ºå°‘å®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- âš ï¸ **APIæ–‡æ¡£ç¼ºå¤±**: æœªå‘ç° OpenAPI/Swagger æ–‡æ¡£ç”Ÿæˆ
- âš ï¸ **ç›‘æ§å‘Šè­¦ç¼ºå¤±**: ç¼ºå°‘ç³»ç»Ÿç›‘æ§å’Œæ—¥å¿—èšåˆæ–¹æ¡ˆ
- âš ï¸ **éƒ¨ç½²è‡ªåŠ¨åŒ–**: CI/CD é…ç½®ä¸å®Œæ•´

### æ¶æ„è¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **æŠ€æœ¯é€‰å‹** | â­â­â­â­â­ (5/5) | æŠ€æœ¯æ ˆç°ä»£åŒ–ï¼Œç‰ˆæœ¬é€‰æ‹©åˆç† |
| **ç³»ç»Ÿæ¶æ„** | â­â­â­â­â˜† (4/5) | å‰åç«¯åˆ†ç¦»ï¼Œåˆ†å±‚æ¸…æ™°ï¼Œç¼ºå°‘æœåŠ¡åŒ–æ‹†åˆ† |
| **ä»£ç è´¨é‡** | â­â­â­â­â˜† (4/5) | ä»£ç ç»„ç»‡è‰¯å¥½ï¼Œç¼ºå°‘æµ‹è¯•è¦†ç›– |
| **å®‰å…¨æ€§** | â­â­â­â­â­ (5/5) | å®‰å…¨æœºåˆ¶å®Œå–„ï¼Œå¤šå±‚é˜²æŠ¤ |
| **æ€§èƒ½ä¼˜åŒ–** | â­â­â­â­â˜† (4/5) | æ”¯æŒç¼“å­˜å’Œå¸¸é©»å†…å­˜ï¼Œå¯è¿›ä¸€æ­¥ä¼˜åŒ– |
| **å¯ç»´æŠ¤æ€§** | â­â­â­â­â˜† (4/5) | æ¶æ„æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„ï¼Œæµ‹è¯•ä¸è¶³ |
| **æ‰©å±•æ€§** | â­â­â­â­â˜† (4/5) | æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒæ’ä»¶æ‰©å±• |
| **éƒ¨ç½²è¿ç»´** | â­â­â­â˜†â˜† (3/5) | æ”¯æŒå®¹å™¨åŒ–ï¼Œç¼ºå°‘è‡ªåŠ¨åŒ–éƒ¨ç½² |

**ç»¼åˆè¯„åˆ†**: â­â­â­â­â˜† **4.25/5** (ä¼˜ç§€)

---

## 1. ç³»ç»Ÿæ¶æ„è®¾è®¡è¯„ä¼°

### 1.1 æ•´ä½“æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯åº”ç”¨å±‚ (Vue 3)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  è¡¨ç°å±‚       â”‚  â”‚  çŠ¶æ€ç®¡ç†     â”‚  â”‚  è·¯ç”±ç®¡ç†     â”‚      â”‚
â”‚  â”‚  Views/Comps â”‚  â”‚  Pinia       â”‚  â”‚  Vue Router  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ HTTP/HTTPS (Axios)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åç«¯åº”ç”¨å±‚ (ThinkPHP 8)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  æ§åˆ¶å™¨å±‚     â”‚  â”‚  æœåŠ¡å±‚       â”‚  â”‚  æ¨¡å‹å±‚       â”‚      â”‚
â”‚  â”‚  Controller  â”‚â†’ â”‚  Service     â”‚â†’ â”‚  Model       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚  ä¸­é—´ä»¶       â”‚  â”‚  éªŒè¯å™¨       â”‚                        â”‚
â”‚  â”‚  Middleware  â”‚  â”‚  Validate    â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å­˜å‚¨å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  MySQL       â”‚  â”‚  Redis       â”‚  â”‚  Filesystem  â”‚      â”‚
â”‚  â”‚  ä¸»æ•°æ®åº“     â”‚  â”‚  ç¼“å­˜/ä¼šè¯   â”‚  â”‚  æ–‡ä»¶å­˜å‚¨     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### âœ… æ¶æ„ä¼˜åŠ¿

1. **å‰åç«¯åˆ†ç¦»**
   - æ¸…æ™°çš„èŒè´£åˆ’åˆ†ï¼Œå‰ç«¯ä¸“æ³¨UI/UXï¼Œåç«¯ä¸“æ³¨ä¸šåŠ¡é€»è¾‘
   - æ”¯æŒç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•
   - ä¾¿äºå›¢é˜Ÿå¹¶è¡Œå¼€å‘

2. **åˆ†å±‚æ¶æ„**
   - **è¡¨ç°å±‚** (Views/Components): è´Ÿè´£UIå±•ç¤º
   - **æ§åˆ¶å™¨å±‚** (Controller): æ¥æ”¶è¯·æ±‚ï¼Œå‚æ•°éªŒè¯
   - **æœåŠ¡å±‚** (Service): ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼ˆæ ¸å¿ƒå±‚ï¼‰
   - **æ¨¡å‹å±‚** (Model): æ•°æ®è®¿é—®å’ŒORMæ˜ å°„
   - **æ•°æ®å±‚**: MySQL + Redis + æ–‡ä»¶å­˜å‚¨

3. **æ¨¡å—åŒ–è®¾è®¡**
   ```
   app/
   â”œâ”€â”€ admin/      # åå°ç®¡ç†æ¨¡å—
   â”œâ”€â”€ api/        # APIæ¥å£æ¨¡å—
   â””â”€â”€ common/     # å…¬å…±æ¨¡å—ï¼ˆService/Middleware/Libraryï¼‰
   ```

#### âš ï¸ æ¶æ„é—®é¢˜

1. **ç¼ºå°‘é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)**
   - ä¸šåŠ¡é€»è¾‘åˆ†æ•£åœ¨ Service å±‚ï¼ŒæœªæŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†
   - å»ºè®®: å¼•å…¥é¢†åŸŸæ¨¡å‹ï¼ŒæŒ‰ä¸šåŠ¡è¾¹ç•Œç»„ç»‡ä»£ç 

2. **ç¼ºå°‘æœåŠ¡åŒ–æ‹†åˆ†**
   - æ‰€æœ‰åŠŸèƒ½åœ¨å•ä½“åº”ç”¨ä¸­ï¼Œæ— æ³•ç‹¬ç«‹æ‰©å±•
   - å»ºè®®: è€ƒè™‘å¾®æœåŠ¡æ¶æ„æˆ–æ¨¡å—ç‹¬ç«‹éƒ¨ç½²

3. **ç¼ºå°‘æ¶ˆæ¯é˜Ÿåˆ—**
   - å¼‚æ­¥ä»»åŠ¡å¤„ç†èƒ½åŠ›æœ‰é™
   - å»ºè®®: å¼•å…¥ RabbitMQ/Redis Queue å¤„ç†å¼‚æ­¥ä»»åŠ¡

---

## 2. æŠ€æœ¯æ ˆé€‰å‹åˆç†æ€§åˆ†æ

### 2.1 åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯„ä¼° |
|------|------|------|
| **ThinkPHP** | 8.1.1 | âœ… æœ€æ–°ç¨³å®šç‰ˆï¼Œæ€§èƒ½ä¼˜å¼‚ |
| **PHP** | 8.0+ | âœ… ç°ä»£åŒ–ç‰¹æ€§ï¼ˆç±»å‹å£°æ˜ã€JITç¼–è¯‘ï¼‰ |
| **MySQL** | 5.7+ | âœ… ç¨³å®šå¯é ï¼Œå»ºè®®å‡çº§åˆ°8.0 |
| **Redis** | - | âœ… ç¼“å­˜/ä¼šè¯å­˜å‚¨ï¼Œé…ç½®åˆç† |
| **Composer** | 2.0+ | âœ… ä¾èµ–ç®¡ç†è§„èŒƒ |

#### æ ¸å¿ƒä¾èµ–åˆ†æ

```json
{
  "topthink/framework": "8.1.1",           // âœ… æœ€æ–°ThinkPHP
  "topthink/think-orm": "3.0.33",          // âœ… ORMæ”¯æŒ
  "topthink/think-throttle": "2.0.2",      // âœ… é™æµæ”¯æŒ
  "symfony/http-foundation": "^7.1",       // âœ… HTTPæŠ½è±¡å±‚
  "voku/anti-xss": "^4.1",                 // âœ… XSSé˜²æŠ¤
  "guzzlehttp/guzzle": "^7.8.1",          // âœ… HTTPå®¢æˆ·ç«¯
  "zircote/swagger-php": "^4.7"            // âœ… APIæ–‡æ¡£ç”Ÿæˆï¼ˆå·²å®‰è£…ä½†æœªä½¿ç”¨ï¼‰
}
```

#### âœ… ä¼˜åŠ¿
- **ç‰ˆæœ¬é¢†å…ˆ**: ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæ¡†æ¶å’Œåº“
- **å®‰å…¨ä¼˜å…ˆ**: å¼•å…¥ anti-xss åº“é˜²æŠ¤XSSæ”»å‡»
- **æ ‡å‡†åŒ–**: éµå¾ªPSRè§„èŒƒï¼Œä½¿ç”¨Composerç®¡ç†ä¾èµ–

#### âš ï¸ æ”¹è¿›å»ºè®®
1. **å‡çº§MySQLåˆ°8.0**: æ›´å¥½çš„æ€§èƒ½å’ŒJSONæ”¯æŒ
2. **å¼•å…¥Swagger UI**: å·²å®‰è£… swagger-phpï¼Œä½†æœªç”Ÿæˆæ–‡æ¡£
3. **æ·»åŠ PHPUnitæµ‹è¯•**: å½“å‰æµ‹è¯•è¦†ç›–ç‡ä¸è¶³

---

### 2.2 å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯„ä¼° |
|------|------|------|
| **Vue** | 3.5.22 | âœ… æœ€æ–°ç‰ˆæœ¬ï¼Œæ€§èƒ½å’ŒDXä¼˜ç§€ |
| **TypeScript** | 5.7.2 | âœ… æœ€æ–°ç‰ˆæœ¬ï¼Œç±»å‹å®‰å…¨ |
| **Vite** | 6.3.5 | âœ… æœ€æ–°ç‰ˆæœ¬ï¼Œæ„å»ºé€Ÿåº¦å¿« |
| **Element Plus** | 2.9.1 | âœ… ç»„ä»¶åº“æˆç†Ÿç¨³å®š |
| **Pinia** | 2.3.0 | âœ… å®˜æ–¹æ¨èçŠ¶æ€ç®¡ç† |
| **Axios** | 1.9.0 | âœ… HTTPå®¢æˆ·ç«¯ï¼Œæ‹¦æˆªå™¨å®Œå–„ |

#### æ ¸å¿ƒä¾èµ–åˆ†æ

```json
{
  "vue": "3.5.22",                    // âœ… æœ€æ–°Vue 3
  "typescript": "5.7.2",              // âœ… æœ€æ–°TS
  "vite": "6.3.5",                    // âœ… æœ€æ–°Vite
  "element-plus": "2.9.1",            // âœ… UIç»„ä»¶åº“
  "pinia": "2.3.0",                   // âœ… çŠ¶æ€ç®¡ç†
  "vue-router": "4.5.0",              // âœ… è·¯ç”±ç®¡ç†
  "axios": "1.9.0",                   // âœ… HTTPå®¢æˆ·ç«¯
  "echarts": "5.5.1",                 // âœ… å›¾è¡¨åº“
  "@vueuse/core": "12.0.0",          // âœ… ç»„åˆå¼å·¥å…·åº“
  "lodash-es": "4.17.21"             // âœ… å·¥å…·å‡½æ•°åº“
}
```

#### âœ… ä¼˜åŠ¿
- **ç°ä»£åŒ–**: å…¨é¢æ‹¥æŠ± Vue 3 Composition API
- **ç±»å‹å®‰å…¨**: TypeScriptè¦†ç›–ç‡é«˜
- **å·¥ç¨‹åŒ–**: ESLint + Prettier ä»£ç è§„èŒƒ
- **æ€§èƒ½ä¼˜åŒ–**: Viteæ„å»º + è·¯ç”±æ‡’åŠ è½½ + ä»£ç åˆ†å‰²

#### âš ï¸ æ”¹è¿›å»ºè®®
1. **æ·»åŠ å•å…ƒæµ‹è¯•**: å¼•å…¥ Vitest æˆ– Jest
2. **æ·»åŠ E2Eæµ‹è¯•**: å¼•å…¥ Playwright æˆ– Cypress
3. **ä¼˜åŒ–æ‰“åŒ…é…ç½®**: è¿›ä¸€æ­¥ä¼˜åŒ– chunk åˆ†å‰²ç­–ç•¥

---

## 3. æ¨¡å—åˆ’åˆ†ä¸æ¥å£è®¾è®¡

### 3.1 åç«¯æ¨¡å—åˆ’åˆ†

```
app/
â”œâ”€â”€ admin/                  # åå°ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ controller/         # æ§åˆ¶å™¨ï¼ˆç”¨æˆ·ã€æƒé™ã€èœå•ç­‰ï¼‰
â”‚   â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶ï¼ˆè®¤è¯ã€æƒé™éªŒè¯ï¼‰
â”‚   â”œâ”€â”€ model/             # æ¨¡å‹ï¼ˆæ•°æ®åº“æ˜ å°„ï¼‰
â”‚   â””â”€â”€ validate/          # éªŒè¯å™¨ï¼ˆè¯·æ±‚å‚æ•°éªŒè¯ï¼‰
â”‚
â”œâ”€â”€ api/                   # APIæ¥å£æ¨¡å—
â”‚   â”œâ”€â”€ controller/        # APIæ§åˆ¶å™¨
â”‚   â””â”€â”€ validate/          # APIéªŒè¯å™¨
â”‚
â””â”€â”€ common/                # å…¬å…±æ¨¡å—
    â”œâ”€â”€ controller/        # åŸºç¡€æ§åˆ¶å™¨ï¼ˆBackend.phpï¼‰
    â”œâ”€â”€ service/           # æœåŠ¡å±‚ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰
    â”‚   â”œâ”€â”€ BaseService.php      # âœ… åŸºç¡€æœåŠ¡ç±»
    â”‚   â”œâ”€â”€ UserService.php      # âœ… ç”¨æˆ·æœåŠ¡
    â”‚   â”œâ”€â”€ AuthService.php      # âœ… è®¤è¯æœåŠ¡
    â”‚   â””â”€â”€ CacheService.php     # âœ… ç¼“å­˜æœåŠ¡
    â”œâ”€â”€ middleware/        # å…¬å…±ä¸­é—´ä»¶
    â”‚   â”œâ”€â”€ EnhancedAuth.php     # âœ… å¢å¼ºè®¤è¯ä¸­é—´ä»¶
    â”‚   â”œâ”€â”€ RateLimit.php        # âœ… é™æµä¸­é—´ä»¶
    â”‚   â”œâ”€â”€ CsrfProtection.php   # âœ… CSRFé˜²æŠ¤
    â”‚   â””â”€â”€ SecurityHeaders.php  # âœ… å®‰å…¨å¤´è®¾ç½®
    â”œâ”€â”€ library/           # å…¬å…±ç±»åº“
    â””â”€â”€ model/             # å…¬å…±æ¨¡å‹
```

#### âœ… æ¨¡å—è®¾è®¡ä¼˜åŠ¿

1. **Service å±‚è®¾è®¡**
   - `BaseService`: æä¾›é€šç”¨ CRUD æ“ä½œï¼ˆfind/select/create/update/deleteï¼‰
   - äº‹åŠ¡ç®¡ç†ç»Ÿä¸€å¤„ç†
   - å¼‚å¸¸å¤„ç†æœºåˆ¶å®Œå–„
   - æ”¯æŒè½¯åˆ é™¤å’Œå…³è”æŸ¥è¯¢

2. **ä¸­é—´ä»¶è®¾è®¡**
   - `EnhancedAuth`: å¢å¼ºè®¤è¯ï¼ˆTokené»‘åå•ã€ä¼šè¯æ£€æŸ¥ã€IPéªŒè¯ã€å¹¶å‘æ§åˆ¶ï¼‰
   - `RateLimit`: APIé™æµï¼ˆæ»‘åŠ¨çª—å£ç®—æ³•ï¼Œå¯é…ç½®é¢‘ç‡ï¼‰
   - `CsrfProtection`: CSRFé˜²æŠ¤
   - `SecurityHeaders`: å®‰å…¨å“åº”å¤´

3. **èŒè´£æ¸…æ™°**
   - Controller: ä»…è´Ÿè´£è¯·æ±‚æ¥æ”¶å’Œå“åº”
   - Service: ä¸šåŠ¡é€»è¾‘å’Œäº‹åŠ¡ç®¡ç†
   - Model: æ•°æ®è®¿é—®å’Œå…³è”å®šä¹‰
   - Middleware: æ¨ªåˆ‡å…³æ³¨ç‚¹

#### âš ï¸ æ”¹è¿›å»ºè®®

1. **Repository æ¨¡å¼**
   ```php
   // å»ºè®®å¼•å…¥Repositoryå±‚ï¼Œéš”ç¦»æ•°æ®è®¿é—®
   interface UserRepositoryInterface {
       public function findById(int $id): ?User;
       public function findByUsername(string $username): ?User;
   }
   ```

2. **äº‹ä»¶é©±åŠ¨æ¶æ„**
   ```php
   // å»ºè®®ä½¿ç”¨äº‹ä»¶è§£è€¦ä¸šåŠ¡é€»è¾‘
   Event::trigger('UserCreated', $user);
   Event::listen('UserCreated', [SendWelcomeEmail::class, 'handle']);
   ```

---

### 3.2 å‰ç«¯æ¨¡å—åˆ’åˆ†

```
web/src/
â”œâ”€â”€ api/                   # APIæ¥å£å°è£…
â”‚   â”œâ”€â”€ backend/          # åå°API
â”‚   â””â”€â”€ common/           # å…¬å…±API
â”‚
â”œâ”€â”€ components/            # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ table/            # è¡¨æ ¼ç»„ä»¶
â”‚   â”œâ”€â”€ form/             # è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ icon/             # å›¾æ ‡ç»„ä»¶
â”‚
â”œâ”€â”€ layouts/              # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ backend/          # åå°å¸ƒå±€
â”‚   â””â”€â”€ container/        # å®¹å™¨å¸ƒå±€
â”‚
â”œâ”€â”€ router/               # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ static/           # é™æ€è·¯ç”±
â”‚
â”œâ”€â”€ stores/               # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ adminInfo.ts      # ç®¡ç†å‘˜ä¿¡æ¯
â”‚   â”œâ”€â”€ userInfo.ts       # ç”¨æˆ·ä¿¡æ¯
â”‚   â””â”€â”€ config.ts         # ç³»ç»Ÿé…ç½®
â”‚
â”œâ”€â”€ styles/               # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ common.scss       # å…¬å…±æ ·å¼
â”‚   â””â”€â”€ theme/            # ä¸»é¢˜å˜é‡
â”‚
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ axios.ts          # âœ… Axioså°è£…ï¼ˆTokenåˆ·æ–°ã€é‡å¤è¯·æ±‚å–æ¶ˆï¼‰
â”‚   â”œâ”€â”€ common.ts         # å…¬å…±å·¥å…·
â”‚   â””â”€â”€ validate.ts       # è¡¨å•éªŒè¯
â”‚
â””â”€â”€ views/                # é¡µé¢è§†å›¾
    â”œâ”€â”€ backend/          # åå°é¡µé¢
    â””â”€â”€ frontend/         # å‰å°é¡µé¢
```

#### âœ… å‰ç«¯è®¾è®¡ä¼˜åŠ¿

1. **Axios å°è£…ä¼˜ç§€**
   - Tokenè‡ªåŠ¨æºå¸¦å’Œåˆ·æ–°
   - é‡å¤è¯·æ±‚è‡ªåŠ¨å–æ¶ˆ
   - ç»Ÿä¸€é”™è¯¯å¤„ç†
   - LoadingçŠ¶æ€ç®¡ç†
   - è¯·æ±‚/å“åº”æ‹¦æˆªå™¨å®Œå–„

2. **çŠ¶æ€ç®¡ç†æ¸…æ™°**
   - ä½¿ç”¨ Pinia æ›¿ä»£ Vuexï¼ˆæ›´ç®€æ´ï¼‰
   - æŒä¹…åŒ–å­˜å‚¨ï¼ˆpinia-plugin-persistedstateï¼‰
   - çŠ¶æ€ç±»å‹å®‰å…¨ï¼ˆTypeScriptï¼‰

3. **ç»„ä»¶åŒ–å¼€å‘**
   - ç»„ä»¶èŒè´£å•ä¸€
   - å¯å¤ç”¨æ€§å¼º
   - Props/Emits ç±»å‹å®šä¹‰å®Œæ•´

#### âš ï¸ æ”¹è¿›å»ºè®®

1. **APIæ¥å£ç±»å‹å®šä¹‰**
   ```typescript
   // å»ºè®®å®šä¹‰å®Œæ•´çš„APIå“åº”ç±»å‹
   interface ApiResponse<T> {
       code: number;
       msg: string;
       data: T;
       timestamp: number;
   }

   interface UserListResponse {
       list: User[];
       total: number;
       page: number;
       limit: number;
   }
   ```

2. **Composables å¤ç”¨**
   ```typescript
   // å»ºè®®æå–ä¸šåŠ¡é€»è¾‘åˆ° composables
   export function useUserList() {
       const loading = ref(false);
       const list = ref<User[]>([]);

       async function fetchList() {
           loading.value = true;
           // ... ä¸šåŠ¡é€»è¾‘
       }

       return { loading, list, fetchList };
   }
   ```

---

## 4. æ•°æ®å­˜å‚¨æ–¹æ¡ˆè¯„ä¼°

### 4.1 æ•°æ®åº“è®¾è®¡

#### å½“å‰é…ç½®

```php
// config/database.php
'connections' => [
    'mysql' => [
        'type'            => 'mysql',
        'hostname'        => env('database.hostname', '127.0.0.1'),
        'database'        => env('database.database', 'superadmin_com'),
        'charset'         => env('database.charset', 'utf8mb4'),
        'prefix'          => env('database.prefix', 'ba_'),

        // éƒ¨ç½²æ–¹å¼
        'deploy'          => 0,              // 0=é›†ä¸­å¼ï¼Œ1=åˆ†å¸ƒå¼
        'rw_separate'     => false,          // è¯»å†™åˆ†ç¦»
        'master_num'      => 1,              // ä¸»æœåŠ¡å™¨æ•°é‡

        // æ€§èƒ½é…ç½®
        'fields_strict'   => true,           // ä¸¥æ ¼æ£€æŸ¥å­—æ®µ
        'break_reconnect' => true,           // æ–­çº¿é‡è¿
        'fields_cache'    => false,          // å­—æ®µç¼“å­˜ï¼ˆå»ºè®®å¼€å¯ï¼‰
    ],
],
```

#### âœ… è®¾è®¡ä¼˜åŠ¿

1. **å­—ç¬¦é›†æ­£ç¡®**: ä½¿ç”¨ utf8mb4 æ”¯æŒemojiå’Œç‰¹æ®Šå­—ç¬¦
2. **ç¯å¢ƒå˜é‡**: æ•æ„Ÿä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®
3. **æ”¯æŒè¯»å†™åˆ†ç¦»**: é…ç½®é¢„ç•™äº†ä¸»ä»æ¶æ„é€‰é¡¹
4. **æ–­çº¿é‡è¿**: ä¿è¯é•¿è¿æ¥ç¨³å®šæ€§

#### âš ï¸ æ”¹è¿›å»ºè®®

1. **å¼€å¯å­—æ®µç¼“å­˜**
   ```php
   'fields_cache' => true,  // å‡å°‘SHOW COLUMNSæŸ¥è¯¢
   ```

2. **é…ç½®è¿æ¥æ± **
   ```php
   'params' => [
       \PDO::ATTR_PERSISTENT => true,  // æŒä¹…è¿æ¥
   ],
   ```

3. **æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–**
   ```sql
   -- å»ºè®®æ·»åŠ å¤åˆç´¢å¼•
   ALTER TABLE `ba_admin` ADD INDEX idx_status_create_time (`status`, `create_time`);
   ALTER TABLE `ba_user` ADD INDEX idx_group_status (`group_id`, `status`);

   -- å»ºè®®æ·»åŠ å…¨æ–‡ç´¢å¼•ï¼ˆæœç´¢åŠŸèƒ½ï¼‰
   ALTER TABLE `ba_article` ADD FULLTEXT INDEX ft_title_content (`title`, `content`);
   ```

4. **åˆ†åŒºè¡¨è®¾è®¡**ï¼ˆå¤§æ•°æ®é‡è¡¨ï¼‰
   ```sql
   -- æ—¥å¿—è¡¨æŒ‰æœˆåˆ†åŒº
   ALTER TABLE `ba_admin_log` PARTITION BY RANGE (MONTH(create_time)) (
       PARTITION p202401 VALUES LESS THAN (202402),
       PARTITION p202402 VALUES LESS THAN (202403),
       -- ...
   );
   ```

---

### 4.2 ç¼“å­˜ç­–ç•¥

#### å½“å‰é…ç½®

```php
// config/cache.php
'stores' => [
    'redis' => [
        'type'       => 'redis',
        'host'       => env('redis.host', '127.0.0.1'),
        'port'       => env('redis.port', 6379),
        'select'     => env('redis.select', 0),
        'prefix'     => env('cache.prefix', 'superadmin:'),
        'expire'     => 0,                    // æ°¸ä¹…ç¼“å­˜
        'serialize'  => ['serialize', 'unserialize'],
    ],
],
```

#### âœ… ç¼“å­˜åº”ç”¨åœºæ™¯

1. **ä¼šè¯å­˜å‚¨**: Token å’Œç”¨æˆ·ä¼šè¯
2. **æ•°æ®ç¼“å­˜**: çƒ­ç‚¹æ•°æ®ç¼“å­˜
3. **é™æµè®¡æ•°**: APIé™æµä½¿ç”¨Redisè®¡æ•°å™¨
4. **Tokené»‘åå•**: ç™»å‡ºåçš„Tokenå¤±æ•ˆ

#### âš ï¸ æ”¹è¿›å»ºè®®

1. **å¤šçº§ç¼“å­˜ç­–ç•¥**
   ```
   L1ç¼“å­˜ï¼ˆæœ¬åœ°ï¼‰: APCu/OPcache - ç¼“å­˜é…ç½®ã€å­—å…¸æ•°æ®
   L2ç¼“å­˜ï¼ˆåˆ†å¸ƒå¼ï¼‰: Redis - ç¼“å­˜ä¸šåŠ¡æ•°æ®ã€ä¼šè¯
   L3ç¼“å­˜ï¼ˆæ•°æ®åº“ï¼‰: MySQL Query Cache
   ```

2. **ç¼“å­˜é”®è§„èŒƒ**
   ```php
   // å»ºè®®ç»Ÿä¸€ç¼“å­˜é”®å‘½åè§„åˆ™
   const CACHE_KEYS = [
       'user_info'   => 'user:info:{id}',           // TTL: 3600s
       'user_perms'  => 'user:perms:{id}',          // TTL: 7200s
       'menu_tree'   => 'menu:tree:{role_id}',      // TTL: 3600s
       'config'      => 'config:{key}',             // TTL: 86400s
   ];
   ```

3. **ç¼“å­˜ç©¿é€é˜²æŠ¤**
   ```php
   // å¸ƒéš†è¿‡æ»¤å™¨é˜²æ­¢ç¼“å­˜ç©¿é€
   if (!$bloomFilter->exists($key)) {
       return null;  // å¿«é€Ÿæ‹’ç»ä¸å­˜åœ¨çš„æ•°æ®
   }

   // ç©ºå€¼ç¼“å­˜ï¼ˆçŸ­TTLï¼‰
   if ($data === null) {
       Cache::set($key, 'NULL', 60);  // ç¼“å­˜60ç§’
   }
   ```

4. **ç¼“å­˜é¢„çƒ­**
   ```php
   // ç³»ç»Ÿå¯åŠ¨æ—¶é¢„çƒ­çƒ­ç‚¹æ•°æ®
   public function warmupCache(): void {
       $this->cacheMenuTree();
       $this->cacheSystemConfig();
       $this->cachePermissions();
   }
   ```

---

### 4.3 æ–‡ä»¶å­˜å‚¨æ–¹æ¡ˆ

#### å½“å‰å®ç°
- æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨
- æ”¯æŒäº‘å­˜å‚¨æ‰©å±•ï¼ˆOSS/S3ï¼‰

#### âš ï¸ æ”¹è¿›å»ºè®®

1. **å¯¹è±¡å­˜å‚¨ä¼˜å…ˆ**
   ```php
   // å»ºè®®é»˜è®¤ä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼ˆé˜¿é‡Œäº‘OSS/è…¾è®¯äº‘COS/AWS S3ï¼‰
   'filesystem' => [
       'default' => 'oss',
       'disks' => [
           'oss' => [
               'type'        => 'oss',
               'access_id'   => env('OSS_ACCESS_ID'),
               'access_key'  => env('OSS_ACCESS_KEY'),
               'bucket'      => env('OSS_BUCKET'),
               'endpoint'    => env('OSS_ENDPOINT'),
               'cdn_domain'  => env('OSS_CDN_DOMAIN'),
           ],
       ],
   ];
   ```

2. **å›¾ç‰‡å¤„ç†ä¼˜åŒ–**
   - ä½¿ç”¨ CDN åŠ é€Ÿå›¾ç‰‡è®¿é—®
   - è‡ªåŠ¨ç”Ÿæˆå¤šå°ºå¯¸ç¼©ç•¥å›¾
   - WebPæ ¼å¼è‡ªåŠ¨è½¬æ¢
   - å›¾ç‰‡æ‡’åŠ è½½

3. **æ–‡ä»¶å¤‡ä»½ç­–ç•¥**
   - å®šæœŸå¤‡ä»½åˆ°å¤šä¸ªå­˜å‚¨èŠ‚ç‚¹
   - æ•°æ®åº“å¤‡ä»½è‡ªåŠ¨ä¸Šä¼ åˆ°å¯¹è±¡å­˜å‚¨
   - ä¿ç•™æœ€è¿‘7å¤©çš„æ¯æ—¥å¤‡ä»½ + æœ€è¿‘4å‘¨çš„å‘¨å¤‡ä»½

---

## 5. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 5.1 åç«¯æ€§èƒ½ä¼˜åŒ–

#### âœ… å·²å®ç°çš„ä¼˜åŒ–

1. **å¸¸é©»å†…å­˜è¿è¡Œ**
   - æ”¯æŒ Workerman å¸¸é©»å†…å­˜æ¨¡å¼
   - æ€§èƒ½æå‡æ•°åå€

2. **æ•°æ®åº“ä¼˜åŒ–**
   - ä½¿ç”¨ORMå‡å°‘SQLæ³¨å…¥é£é™©
   - æ”¯æŒæŸ¥è¯¢ç¼“å­˜

3. **ç¼“å­˜æœºåˆ¶**
   - Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
   - ä¼šè¯å­˜å‚¨ä½¿ç”¨Redis

#### âš ï¸ è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

1. **OPcache é…ç½®ä¼˜åŒ–**
   ```ini
   ; php.ini
   opcache.enable=1
   opcache.memory_consumption=256         ; å¢åŠ å†…å­˜åˆ°256M
   opcache.interned_strings_buffer=16     ; å­—ç¬¦ä¸²ç¼“å†²åŒº16M
   opcache.max_accelerated_files=10000    ; æœ€å¤§ç¼“å­˜æ–‡ä»¶æ•°
   opcache.validate_timestamps=0          ; ç”Ÿäº§ç¯å¢ƒå…³é—­æ—¶é—´æˆ³éªŒè¯
   opcache.revalidate_freq=0
   opcache.fast_shutdown=1
   opcache.enable_file_override=1
   ```

2. **æ•°æ®åº“è¿æ¥æ± **
   ```php
   // ä½¿ç”¨ Swoole åç¨‹è¿æ¥æ± 
   $pool = new Swoole\Database\PDOPool(
       (new Swoole\Database\PDOConfig())
           ->withHost('127.0.0.1')
           ->withDbName('superadmin')
           ->withCharset('utf8mb4'),
       10  // è¿æ¥æ± å¤§å°
   );
   ```

3. **æŸ¥è¯¢ä¼˜åŒ–**
   ```php
   // é¿å… N+1 æŸ¥è¯¢
   $users = User::with(['roles', 'department'])->select();

   // åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
   $users = User::field('id,username,email')->select();

   // åˆ†é¡µæŸ¥è¯¢å¤§æ•°æ®é›†
   $users = User::paginate(50);
   ```

4. **å¼‚æ­¥ä»»åŠ¡å¤„ç†**
   ```php
   // ä½¿ç”¨é˜Ÿåˆ—å¤„ç†è€—æ—¶ä»»åŠ¡
   Queue::push(SendEmailJob::class, ['email' => $email, 'content' => $content]);
   ```

---

### 5.2 å‰ç«¯æ€§èƒ½ä¼˜åŒ–

#### âœ… å·²å®ç°çš„ä¼˜åŒ–

1. **Vite æ„å»ºä¼˜åŒ–**
   ```typescript
   // vite.config.ts
   build: {
       rollupOptions: {
           output: {
               manualChunks: {
                   vue: ['vue', 'vue-router', 'pinia', 'vue-i18n', 'element-plus'],
                   echarts: ['echarts'],
               },
           },
       },
   }
   ```

2. **è·¯ç”±æ‡’åŠ è½½**
   ```typescript
   const routes = [
       {
           path: '/dashboard',
           component: () => import('@/views/dashboard/index.vue'),
       },
   ];
   ```

3. **æŒ‰éœ€åŠ è½½è¯­è¨€åŒ…**
   - åŠ¨æ€åŠ è½½é¡µé¢å¯¹åº”çš„è¯­è¨€åŒ…
   - å‡å°‘åˆå§‹åŠ è½½ä½“ç§¯

#### âš ï¸ è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

1. **èµ„æºå‹ç¼©**
   ```typescript
   // vite.config.ts
   build: {
       minify: 'terser',
       terserOptions: {
           compress: {
               drop_console: true,      // ç§»é™¤console
               drop_debugger: true,     // ç§»é™¤debugger
               pure_funcs: ['console.log'],
           },
       },
       cssCodeSplit: true,              // CSSä»£ç åˆ†å‰²
       chunkSizeWarningLimit: 1000,     // chunkå¤§å°è­¦å‘Šé˜ˆå€¼
   }
   ```

2. **å›¾ç‰‡ä¼˜åŒ–**
   ```typescript
   // ä½¿ç”¨vite-plugin-imageminå‹ç¼©å›¾ç‰‡
   import viteImagemin from 'vite-plugin-imagemin';

   plugins: [
       viteImagemin({
           gifsicle: { optimizationLevel: 7 },
           optipng: { optimizationLevel: 7 },
           mozjpeg: { quality: 80 },
           webp: { quality: 80 },
       }),
   ]
   ```

3. **CDNåŠ é€Ÿ**
   ```typescript
   // å°†å¤§å‹ä¾èµ–åŒ…é€šè¿‡CDNåŠ è½½
   build: {
       rollupOptions: {
           external: ['vue', 'element-plus'],
           output: {
               globals: {
                   vue: 'Vue',
                   'element-plus': 'ElementPlus',
               },
           },
       },
   }
   ```

4. **æœåŠ¡ç«¯æ¸²æŸ“(SSR)**
   ```typescript
   // è€ƒè™‘ä½¿ç”¨Nuxt 3å®ç°SSRï¼Œæå‡é¦–å±åŠ è½½é€Ÿåº¦å’ŒSEO
   // ç‰¹åˆ«é€‚åˆéœ€è¦æœç´¢å¼•æ“æ”¶å½•çš„é¡µé¢
   ```

5. **PWAæ”¯æŒ**
   ```typescript
   // ä½¿ç”¨vite-plugin-pwaå®ç°ç¦»çº¿è®¿é—®
   import { VitePWA } from 'vite-plugin-pwa';

   plugins: [
       VitePWA({
           registerType: 'autoUpdate',
           manifest: {
               name: 'SuperAdmin',
               short_name: 'Admin',
               theme_color: '#ffffff',
           },
       }),
   ]
   ```

---

### 5.3 ç³»ç»Ÿæ€§èƒ½ç›‘æ§

#### âš ï¸ å½“å‰ç¼ºå¤±

é¡¹ç›®ç¼ºå°‘å®Œæ•´çš„æ€§èƒ½ç›‘æ§æ–¹æ¡ˆã€‚

#### ğŸ’¡ å»ºè®®å®æ–½æ–¹æ¡ˆ

1. **APMæ€§èƒ½ç›‘æ§**
   ```bash
   # æ¨èä½¿ç”¨ Sentry æˆ– Skywalking
   composer require sentry/sentry-laravel  # PHPç«¯
   npm install @sentry/vue                 # å‰ç«¯
   ```

2. **æ—¥å¿—èšåˆ**
   ```yaml
   # ä½¿ç”¨ELK Stackï¼ˆElasticsearch + Logstash + Kibanaï¼‰
   logging:
     driver: daily
     path: storage/logs/laravel.log
     # è‡ªåŠ¨ä¸Šä¼ åˆ°Elasticsearch
   ```

3. **æ€§èƒ½æŒ‡æ ‡ç›‘æ§**
   ```php
   // ç›‘æ§æ ¸å¿ƒæŒ‡æ ‡
   - APIå“åº”æ—¶é—´ï¼ˆP50/P95/P99ï¼‰
   - æ•°æ®åº“æŸ¥è¯¢æ—¶é—´
   - ç¼“å­˜å‘½ä¸­ç‡
   - é”™è¯¯ç‡
   - å¹¶å‘ç”¨æˆ·æ•°
   ```

---

## 6. å®‰å…¨æ¶æ„è®¾è®¡

### 6.1 è®¤è¯ä¸æˆæƒæœºåˆ¶

#### âœ… å·²å®ç°çš„å®‰å…¨æœºåˆ¶

1. **JWTè®¤è¯**
   ```php
   // app/common/service/AuthService.php
   - Tokenç”Ÿæˆå’ŒéªŒè¯
   - Tokenè‡ªåŠ¨åˆ·æ–°ï¼ˆ409çŠ¶æ€ç è§¦å‘ï¼‰
   - Tokené»‘åå•æœºåˆ¶
   ```

2. **å¢å¼ºè®¤è¯ä¸­é—´ä»¶**
   ```php
   // app/common/middleware/EnhancedAuth.php
   âœ… Tokené»‘åå•æ£€æŸ¥
   âœ… ä¼šè¯è¿‡æœŸæ£€æŸ¥ï¼ˆé»˜è®¤7å¤©ï¼‰
   âœ… IPå˜åŒ–æ£€æµ‹å’Œæ—¥å¿—è®°å½•
   âœ… User-Agentå˜åŒ–æ£€æµ‹
   âœ… å¹¶å‘ä¼šè¯æ§åˆ¶ï¼ˆé»˜è®¤1ä¸ªï¼‰
   ```

3. **RBACæƒé™æ¨¡å‹**
   - è§’è‰²-æƒé™-èœå•ä¸‰çº§æ§åˆ¶
   - æ”¯æŒæ•°æ®æƒé™ï¼ˆè¡Œçº§æƒé™ï¼‰
   - å‰åç«¯åŒé‡é‰´æƒ

#### è¯„åˆ†: â­â­â­â­â­ (5/5)

---

### 6.2 æ•°æ®å®‰å…¨

#### âœ… å·²å®ç°çš„é˜²æŠ¤

1. **SQLæ³¨å…¥é˜²æŠ¤**
   ```php
   // ä½¿ç”¨ORMå‚æ•°ç»‘å®š
   $user = User::where('id', $userId)->find();
   ```

2. **XSSé˜²æŠ¤**
   ```php
   // composer.json
   "voku/anti-xss": "^4.1"

   // è¾“å…¥è¿‡æ»¤å’Œè¾“å‡ºè½¬ä¹‰
   $antiXss = new AntiXSS();
   $cleanInput = $antiXss->xss_clean($input);
   ```

3. **CSRFé˜²æŠ¤**
   ```php
   // app/common/middleware/CsrfProtection.php
   - TokenéªŒè¯
   - åŒé‡æäº¤Cookie
   ```

4. **å®‰å…¨å“åº”å¤´**
   ```php
   // app/common/middleware/SecurityHeaders.php
   X-Content-Type-Options: nosniff
   X-Frame-Options: SAMEORIGIN
   X-XSS-Protection: 1; mode=block
   Referrer-Policy: strict-origin-when-cross-origin
   Content-Security-Policy: default-src 'self'
   ```

#### è¯„åˆ†: â­â­â­â­â­ (5/5)

---

### 6.3 APIå®‰å…¨

#### âœ… å·²å®ç°çš„é˜²æŠ¤

1. **é™æµæœºåˆ¶**
   ```php
   // app/common/middleware/RateLimit.php
   - æ»‘åŠ¨çª—å£ç®—æ³•
   - å¯é…ç½®é¢‘ç‡ï¼ˆé»˜è®¤60æ¬¡/åˆ†é’Ÿï¼‰
   - IPå’Œç”¨æˆ·IDåŒé‡æ ‡è¯†
   - å“åº”å¤´åŒ…å«é™æµä¿¡æ¯ï¼ˆX-RateLimit-*ï¼‰
   ```

2. **è¯·æ±‚éªŒè¯**
   ```php
   // éªŒè¯å™¨å±‚ç»Ÿä¸€éªŒè¯
   app/admin/validate/
   - å‚æ•°ç±»å‹éªŒè¯
   - å¿…å¡«é¡¹éªŒè¯
   - æ ¼å¼éªŒè¯
   ```

#### âš ï¸ æ”¹è¿›å»ºè®®

1. **APIç­¾åéªŒè¯**
   ```php
   // å»ºè®®æ·»åŠ APIç­¾åæœºåˆ¶
   class ApiSignatureMiddleware {
       public function handle(Request $request, Closure $next) {
           $timestamp = $request->header('X-Timestamp');
           $signature = $request->header('X-Signature');
           $nonce = $request->header('X-Nonce');

           // éªŒè¯æ—¶é—´æˆ³ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰
           if (abs(time() - $timestamp) > 300) {
               return response()->json(['error' => 'Request expired'], 401);
           }

           // éªŒè¯ç­¾å
           $expectedSignature = hash_hmac('sha256',
               $timestamp . $nonce . $request->getContent(),
               config('app.api_secret')
           );

           if (!hash_equals($expectedSignature, $signature)) {
               return response()->json(['error' => 'Invalid signature'], 401);
           }

           return $next($request);
       }
   }
   ```

2. **IPç™½åå•/é»‘åå•**
   ```php
   // æ•æ„Ÿæ“ä½œé™åˆ¶IPè®¿é—®
   'ip_whitelist' => [
       'admin_sensitive_operations' => ['192.168.1.0/24'],
   ],
   ```

3. **APIç‰ˆæœ¬æ§åˆ¶**
   ```php
   // æ”¯æŒAPIç‰ˆæœ¬è¿­ä»£
   Route::prefix('api/v1')->group(function() {
       // v1 API
   });

   Route::prefix('api/v2')->group(function() {
       // v2 API
   });
   ```

---

### 6.4 å¯†ç å®‰å…¨

#### âœ… å·²å®ç°

```php
// ä½¿ç”¨PHPå†…ç½®çš„password_hash
password_hash($password, PASSWORD_DEFAULT);
```

#### âš ï¸ æ”¹è¿›å»ºè®®

1. **ä½¿ç”¨Argon2idç®—æ³•**
   ```php
   // æ›´å®‰å…¨çš„å¯†ç å“ˆå¸Œç®—æ³•
   password_hash($password, PASSWORD_ARGON2ID, [
       'memory_cost' => 65536,  // 64MB
       'time_cost'   => 4,      // 4æ¬¡è¿­ä»£
       'threads'     => 3,      // 3ä¸ªçº¿ç¨‹
   ]);
   ```

2. **å¯†ç ç­–ç•¥**
   ```php
   // å»ºè®®å¼ºåˆ¶å¯†ç å¤æ‚åº¦
   - æœ€å°é•¿åº¦: 8ä½
   - å¿…é¡»åŒ…å«: å¤§å°å†™å­—æ¯ + æ•°å­— + ç‰¹æ®Šå­—ç¬¦
   - å¯†ç å†å²: ä¸èƒ½ä½¿ç”¨æœ€è¿‘3æ¬¡çš„å¯†ç 
   - å¯†ç è¿‡æœŸ: 90å¤©å¼ºåˆ¶ä¿®æ”¹
   ```

3. **å¤šå› ç´ è®¤è¯(MFA)**
   ```php
   // å»ºè®®æ·»åŠ TOTPåŒå› ç´ è®¤è¯
   composer require pragmarx/google2fa

   // æ•æ„Ÿæ“ä½œè¦æ±‚MFAéªŒè¯
   ```

---

## 7. æ‰©å±•æ€§ä¸å¯ç»´æŠ¤æ€§è§„åˆ’

### 7.1 ä»£ç ç»„ç»‡

#### âœ… å½“å‰çŠ¶æ€

1. **åç«¯ä»£ç ç»„ç»‡**
   ```
   âœ… éµå¾ªPSR-4è‡ªåŠ¨åŠ è½½è§„èŒƒ
   âœ… åˆ†å±‚æ¶æ„æ¸…æ™°ï¼ˆController-Service-Modelï¼‰
   âœ… ä¸­é—´ä»¶å’ŒéªŒè¯å™¨ç‹¬ç«‹ç®¡ç†
   âœ… å…¬å…±æ¨¡å—å¤ç”¨æ€§å¥½
   ```

2. **å‰ç«¯ä»£ç ç»„ç»‡**
   ```
   âœ… ç»„ä»¶åŒ–å¼€å‘
   âœ… TypeScriptç±»å‹å®šä¹‰å®Œæ•´
   âœ… è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†ç‹¬ç«‹
   âœ… å·¥å…·å‡½æ•°æ¨¡å—åŒ–
   ```

#### è¯„åˆ†: â­â­â­â­â˜† (4/5)

---

### 7.2 æ–‡æ¡£è§„èŒƒ

#### âœ… å·²æœ‰æ–‡æ¡£

- âœ… README.md: é¡¹ç›®ä»‹ç»å’Œå¿«é€Ÿå¼€å§‹
- âœ… ARCHITECTURE.md: æ¶æ„è¯´æ˜
- âœ… CHANGELOG.md: å˜æ›´æ—¥å¿—

#### âš ï¸ ç¼ºå¤±æ–‡æ¡£

- âŒ APIæ–‡æ¡£: ç¼ºå°‘OpenAPI/Swaggeræ–‡æ¡£
- âŒ å¼€å‘è§„èŒƒ: ç¼ºå°‘ç¼–ç è§„èŒƒæ–‡æ¡£
- âŒ éƒ¨ç½²æ–‡æ¡£: ç¼ºå°‘è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—
- âŒ æµ‹è¯•æ–‡æ¡£: ç¼ºå°‘æµ‹è¯•ç­–ç•¥å’Œç”¨ä¾‹

#### ğŸ’¡ å»ºè®®è¡¥å……

1. **APIæ–‡æ¡£ç”Ÿæˆ**
   ```php
   // å·²å®‰è£…swagger-phpï¼Œå»ºè®®ä½¿ç”¨æ³¨è§£ç”Ÿæˆæ–‡æ¡£
   /**
    * @OA\Get(
    *     path="/api/users",
    *     summary="è·å–ç”¨æˆ·åˆ—è¡¨",
    *     tags={"ç”¨æˆ·ç®¡ç†"},
    *     @OA\Parameter(name="page", in="query", required=false),
    *     @OA\Response(response=200, description="æˆåŠŸ")
    * )
    */
   public function index() {
       // ...
   }

   // ç”Ÿæˆæ–‡æ¡£
   php think api:doc
   ```

2. **ä»£ç æ³¨é‡Šè§„èŒƒ**
   ```php
   /**
    * åˆ›å»ºç”¨æˆ·
    *
    * @param array $data ç”¨æˆ·æ•°æ®
    * @return User|false æˆåŠŸè¿”å›ç”¨æˆ·å¯¹è±¡ï¼Œå¤±è´¥è¿”å›false
    * @throws \Exception å½“ç”¨æˆ·åå·²å­˜åœ¨æ—¶æŠ›å‡ºå¼‚å¸¸
    */
   public function createUser(array $data): User|false
   ```

3. **å˜æ›´æ—¥å¿—è§„èŒƒ**
   ```markdown
   # éµå¾ª Keep a Changelog è§„èŒƒ
   ## [Unreleased]
   ### Added
   - æ–°å¢åŠŸèƒ½æè¿°

   ### Changed
   - å˜æ›´åŠŸèƒ½æè¿°

   ### Fixed
   - ä¿®å¤é—®é¢˜æè¿°
   ```

---

### 7.3 æµ‹è¯•ç­–ç•¥

#### âŒ å½“å‰çŠ¶æ€

é¡¹ç›®å­˜åœ¨æµ‹è¯•ç›®å½•ï¼Œä½†æµ‹è¯•ç”¨ä¾‹**ä¸¥é‡ä¸è¶³**ï¼š
```
tests/
â”œâ”€â”€ Feature/
â”‚   â””â”€â”€ UserApiTest.php  # ä»…æœ‰ç¤ºä¾‹æµ‹è¯•
â””â”€â”€ Unit/
```

#### âš ï¸ æµ‹è¯•è¦†ç›–ç‡

- å•å…ƒæµ‹è¯•è¦†ç›–ç‡: **~5%** ï¼ˆå‡ ä¹æ²¡æœ‰ï¼‰
- é›†æˆæµ‹è¯•è¦†ç›–ç‡: **0%**
- E2Eæµ‹è¯•è¦†ç›–ç‡: **0%**

**è¯„åˆ†**: â­â˜†â˜†â˜†â˜† (1/5) - **éœ€è¦ç´§æ€¥æ”¹è¿›**

---

#### ğŸ’¡ å»ºè®®æµ‹è¯•ç­–ç•¥

1. **å•å…ƒæµ‹è¯•** (PHPUnit + Vitest)
   ```php
   // tests/Unit/Service/UserServiceTest.php
   class UserServiceTest extends TestCase {
       public function test_create_user_with_valid_data() {
           $service = new UserService();
           $user = $service->createUser([
               'username' => 'test',
               'password' => 'password123',
           ]);

           $this->assertInstanceOf(User::class, $user);
           $this->assertEquals('test', $user->username);
       }

       public function test_create_user_with_duplicate_username() {
           $this->expectException(\Exception::class);
           // ...
       }
   }
   ```

2. **é›†æˆæµ‹è¯•**
   ```php
   // tests/Feature/AuthApiTest.php
   class AuthApiTest extends TestCase {
       public function test_login_with_valid_credentials() {
           $response = $this->post('/api/login', [
               'username' => 'admin',
               'password' => 'admin123',
           ]);

           $response->assertStatus(200)
                    ->assertJsonStructure(['data' => ['token']]);
       }

       public function test_login_rate_limiting() {
           // æµ‹è¯•é™æµæœºåˆ¶
           for ($i = 0; $i < 61; $i++) {
               $response = $this->post('/api/login', []);
           }
           $response->assertStatus(429);  // Too Many Requests
       }
   }
   ```

3. **å‰ç«¯æµ‹è¯•**
   ```typescript
   // web/tests/unit/components/UserForm.spec.ts
   import { mount } from '@vue/test-utils';
   import UserForm from '@/components/UserForm.vue';

   describe('UserForm.vue', () => {
       it('validates required fields', async () => {
           const wrapper = mount(UserForm);
           await wrapper.find('button').trigger('click');
           expect(wrapper.find('.error').text()).toContain('ç”¨æˆ·åä¸èƒ½ä¸ºç©º');
       });
   });
   ```

4. **E2Eæµ‹è¯•**
   ```typescript
   // web/e2e/login.spec.ts
   import { test, expect } from '@playwright/test';

   test('ç”¨æˆ·ç™»å½•æµç¨‹', async ({ page }) => {
       await page.goto('http://localhost:5173');
       await page.fill('input[name="username"]', 'admin');
       await page.fill('input[name="password"]', 'admin123');
       await page.click('button[type="submit"]');
       await expect(page).toHaveURL(/.*dashboard/);
   });
   ```

5. **æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡**
   ```yaml
   ç›®æ ‡è¦†ç›–ç‡:
     - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘: â‰¥ 80%
     - Serviceå±‚: â‰¥ 90%
     - Controllerå±‚: â‰¥ 70%
     - å·¥å…·å‡½æ•°: â‰¥ 95%
     - å‰ç«¯ç»„ä»¶: â‰¥ 70%
   ```

---

### 7.4 ä»£ç è´¨é‡å·¥å…·

#### âœ… å·²é…ç½®

- âœ… ESLint: JavaScript/TypeScriptä»£ç æ£€æŸ¥
- âœ… Prettier: ä»£ç æ ¼å¼åŒ–
- âœ… TypeScript: ç±»å‹æ£€æŸ¥

#### âš ï¸ å»ºè®®æ·»åŠ 

1. **PHPä»£ç è´¨é‡å·¥å…·**
   ```bash
   # PHP_CodeSniffer - ä»£ç è§„èŒƒæ£€æŸ¥
   composer require --dev squizlabs/php_codesniffer
   ./vendor/bin/phpcs --standard=PSR12 app/

   # PHPStan - é™æ€åˆ†æ
   composer require --dev phpstan/phpstan
   ./vendor/bin/phpstan analyse app/ --level=8

   # PHP-CS-Fixer - è‡ªåŠ¨ä¿®å¤ä»£ç æ ¼å¼
   composer require --dev friendsofphp/php-cs-fixer
   ```

2. **Git Hooks**
   ```bash
   # .husky/pre-commit
   #!/bin/sh
   # å‰ç«¯æ£€æŸ¥
   cd web && npm run lint

   # åç«¯æ£€æŸ¥
   composer run phpcs
   composer run phpstan

   # è¿è¡Œæµ‹è¯•
   php think test
   ```

3. **æŒç»­é›†æˆé…ç½®**
   ```yaml
   # .github/workflows/ci.yml
   name: CI
   on: [push, pull_request]
   jobs:
     test:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v2
         - name: Run Tests
           run: |
             composer install
             php think test
             cd web && npm install && npm run test
   ```

---

## 8. å¼€å‘ä¸éƒ¨ç½²æµç¨‹è§„èŒƒ

### 8.1 å½“å‰éƒ¨ç½²æ–¹æ¡ˆ

#### âœ… å·²æ”¯æŒçš„éƒ¨ç½²æ–¹å¼

1. **å•æœºéƒ¨ç½²**
   - Nginx + PHP-FPM + MySQL + Redis
   - ä¼ ç»ŸLNMPæ¶æ„

2. **å®¹å™¨åŒ–éƒ¨ç½²**
   - å­˜åœ¨åŸºç¡€çš„Dockeré…ç½®ï¼ˆéœ€å®Œå–„ï¼‰
   - æ”¯æŒDocker Compose

#### âš ï¸ å­˜åœ¨çš„é—®é¢˜

- âŒ ç¼ºå°‘å®Œæ•´çš„CI/CDé…ç½®
- âŒ ç¼ºå°‘è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
- âŒ ç¼ºå°‘ç¯å¢ƒéš”ç¦»æ–¹æ¡ˆ
- âŒ ç¼ºå°‘ç°åº¦å‘å¸ƒç­–ç•¥

---

### 8.2 å»ºè®®çš„CI/CDæµç¨‹

#### ğŸ’¡ å®Œæ•´æµç¨‹è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¼€å‘æäº¤   â”‚ â†’ â”‚   ä»£ç æ£€æŸ¥   â”‚ â†’ â”‚   è‡ªåŠ¨æµ‹è¯•   â”‚ â†’ â”‚   æ„å»ºéƒ¨ç½²   â”‚
â”‚  Git Push   â”‚    â”‚ Lint/Format â”‚    â”‚ Unit/E2E    â”‚    â”‚   Docker    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1. GitHub Actions é…ç½®

```yaml
# .github/workflows/deploy.yml
name: Deploy

on:
  push:
    branches: [main, develop]

jobs:
  # ===== ä»£ç è´¨é‡æ£€æŸ¥ =====
  quality-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: '8.1'

      - name: Install Dependencies
        run: composer install --no-dev --optimize-autoloader

      - name: Run PHPStan
        run: composer run phpstan

      - name: Run PHP CodeSniffer
        run: composer run phpcs

      - name: Frontend Lint
        run: |
          cd web
          npm install
          npm run lint

  # ===== è‡ªåŠ¨åŒ–æµ‹è¯• =====
  test:
    needs: quality-check
    runs-on: ubuntu-latest
    services:
      mysql:
        image: mysql:8.0
        env:
          MYSQL_ROOT_PASSWORD: root
          MYSQL_DATABASE: superadmin_test
        ports:
          - 3306:3306
      redis:
        image: redis:6.2
        ports:
          - 6379:6379
    steps:
      - uses: actions/checkout@v3

      - name: Run Backend Tests
        run: |
          composer install
          php think migrate:run
          php think test --coverage

      - name: Run Frontend Tests
        run: |
          cd web
          npm install
          npm run test:unit
          npm run test:e2e

  # ===== æ„å»ºDockeré•œåƒ =====
  build:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v2

      - name: Login to Docker Hub
        uses: docker/login-action@v2
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}

      - name: Build and Push Backend
        uses: docker/build-push-action@v4
        with:
          context: .
          file: ./docker/Dockerfile.backend
          push: true
          tags: superadmin/backend:${{ github.sha }}

      - name: Build and Push Frontend
        uses: docker/build-push-action@v4
        with:
          context: ./web
          file: ./docker/Dockerfile.frontend
          push: true
          tags: superadmin/frontend:${{ github.sha }}

  # ===== éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ =====
  deploy:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - name: Deploy to Production
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.PROD_HOST }}
          username: ${{ secrets.PROD_USER }}
          key: ${{ secrets.PROD_SSH_KEY }}
          script: |
            cd /opt/superadmin
            docker-compose pull
            docker-compose up -d --no-deps --build
            docker-compose exec -T backend php think migrate:run
            docker-compose exec -T backend php think cache:clear
```

---

#### 2. Docker é…ç½®å®Œå–„

```dockerfile
# docker/Dockerfile.backend
FROM php:8.1-fpm-alpine

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apk add --no-cache \
    nginx \
    supervisor \
    git \
    zip \
    unzip \
    libpng-dev \
    libjpeg-turbo-dev \
    freetype-dev \
    redis

# å®‰è£…PHPæ‰©å±•
RUN docker-php-ext-configure gd --with-freetype --with-jpeg \
    && docker-php-ext-install -j$(nproc) \
        pdo_mysql \
        mysqli \
        gd \
        bcmath \
        opcache \
        pcntl

# å®‰è£…Redisæ‰©å±•
RUN pecl install redis && docker-php-ext-enable redis

# å®‰è£…Composer
COPY --from=composer:latest /usr/bin/composer /usr/bin/composer

# å¤åˆ¶åº”ç”¨ä»£ç 
WORKDIR /var/www
COPY . .

# å®‰è£…ä¾èµ–
RUN composer install --no-dev --optimize-autoloader

# é…ç½®æƒé™
RUN chown -R www-data:www-data /var/www \
    && chmod -R 755 /var/www/storage /var/www/public

# å¤åˆ¶é…ç½®æ–‡ä»¶
COPY docker/nginx.conf /etc/nginx/nginx.conf
COPY docker/php.ini /usr/local/etc/php/php.ini
COPY docker/supervisord.conf /etc/supervisord.conf

# æš´éœ²ç«¯å£
EXPOSE 80

# å¯åŠ¨Supervisor
CMD ["/usr/bin/supervisord", "-c", "/etc/supervisord.conf"]
```

```dockerfile
# docker/Dockerfile.frontend
FROM node:18-alpine AS builder

WORKDIR /app
COPY web/package*.json ./
RUN npm ci

COPY web/ ./
RUN npm run build

# Nginxé•œåƒ
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY docker/nginx-frontend.conf /etc/nginx/conf.d/default.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

```yaml
# docker-compose.yml
version: '3.8'

services:
  # Nginxè´Ÿè½½å‡è¡¡
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./docker/nginx-lb.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - frontend
      - backend
    restart: unless-stopped

  # å‰ç«¯æœåŠ¡
  frontend:
    image: superadmin/frontend:${VERSION:-latest}
    restart: unless-stopped

  # åç«¯æœåŠ¡ï¼ˆå¯æ‰©å±•å¤šå®ä¾‹ï¼‰
  backend:
    image: superadmin/backend:${VERSION:-latest}
    deploy:
      replicas: 3  # 3ä¸ªåç«¯å®ä¾‹
    environment:
      - DB_HOST=mysql
      - REDIS_HOST=redis
    volumes:
      - ./storage:/var/www/storage
      - ./public/uploads:/var/www/public/uploads
    depends_on:
      - mysql
      - redis
    restart: unless-stopped

  # MySQLä¸»åº“
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: ${DB_ROOT_PASSWORD}
      MYSQL_DATABASE: ${DB_DATABASE}
    volumes:
      - mysql-data:/var/lib/mysql
      - ./docker/mysql.cnf:/etc/mysql/conf.d/custom.cnf
    ports:
      - "3306:3306"
    restart: unless-stopped

  # Redis
  redis:
    image: redis:6.2-alpine
    command: redis-server --appendonly yes
    volumes:
      - redis-data:/data
    ports:
      - "6379:6379"
    restart: unless-stopped

  # ç›‘æ§ - Prometheus
  prometheus:
    image: prom/prometheus
    volumes:
      - ./docker/prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus-data:/prometheus
    ports:
      - "9090:9090"
    restart: unless-stopped

  # ç›‘æ§ - Grafana
  grafana:
    image: grafana/grafana
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_PASSWORD}
    volumes:
      - grafana-data:/var/lib/grafana
    ports:
      - "3000:3000"
    restart: unless-stopped

volumes:
  mysql-data:
  redis-data:
  prometheus-data:
  grafana-data:
```

---

#### 3. ç¯å¢ƒç®¡ç†

```bash
# å¼€å‘ç¯å¢ƒ
.env.development
- APP_DEBUG=true
- APP_ENV=development
- LOG_LEVEL=debug

# æµ‹è¯•ç¯å¢ƒ
.env.testing
- APP_DEBUG=true
- APP_ENV=testing
- DB_DATABASE=superadmin_test

# ç”Ÿäº§ç¯å¢ƒ
.env.production
- APP_DEBUG=false
- APP_ENV=production
- LOG_LEVEL=error
- CACHE_DRIVER=redis
- SESSION_DRIVER=redis
```

---

#### 4. ç°åº¦å‘å¸ƒç­–ç•¥

```yaml
# é‡‘ä¸é›€å‘å¸ƒï¼ˆCanary Deploymentï¼‰
# ä½¿ç”¨Kubernetesæˆ–Docker Swarmå®ç°

# 1. éƒ¨ç½²æ–°ç‰ˆæœ¬ï¼ˆ10%æµé‡ï¼‰
kubectl set image deployment/backend backend=superadmin/backend:v2.4.0
kubectl scale deployment/backend-canary --replicas=1

# 2. ç›‘æ§é”™è¯¯ç‡å’Œæ€§èƒ½æŒ‡æ ‡
# å¦‚æœé”™è¯¯ç‡ < 1%ï¼Œé€æ­¥å¢åŠ æµé‡

# 3. å…¨é‡å‘å¸ƒ
kubectl scale deployment/backend-canary --replicas=10
kubectl scale deployment/backend --replicas=0

# 4. å›æ»šï¼ˆå¦‚æœå‡ºç°é—®é¢˜ï¼‰
kubectl rollout undo deployment/backend
```

---

### 8.3 ç›‘æ§å‘Šè­¦æ–¹æ¡ˆ

#### ğŸ’¡ å»ºè®®æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨ç›‘æ§     â”‚ â†’ â”‚  æŒ‡æ ‡æ”¶é›†     â”‚ â†’ â”‚  å‘Šè­¦é€šçŸ¥     â”‚
â”‚  APM/æ—¥å¿—    â”‚    â”‚  Prometheus  â”‚    â”‚  é’‰é’‰/é‚®ä»¶   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1. åº”ç”¨æ€§èƒ½ç›‘æ§(APM)

```php
// é›†æˆSentryç›‘æ§
composer require sentry/sentry-laravel

// config/sentry.php
'dsn' => env('SENTRY_LARAVEL_DSN'),
'traces_sample_rate' => 1.0,  // 100%é‡‡æ ·
'profiles_sample_rate' => 1.0,
```

```typescript
// å‰ç«¯ç›‘æ§
import * as Sentry from "@sentry/vue";

Sentry.init({
  app,
  dsn: import.meta.env.VITE_SENTRY_DSN,
  integrations: [
    new Sentry.BrowserTracing({
      routingInstrumentation: Sentry.vueRouterInstrumentation(router),
    }),
    new Sentry.Replay(),
  ],
  tracesSampleRate: 1.0,
  replaysSessionSampleRate: 0.1,
  replaysOnErrorSampleRate: 1.0,
});
```

#### 2. æ—¥å¿—èšåˆ

```yaml
# docker/filebeat.yml
filebeat.inputs:
  - type: log
    paths:
      - /var/www/storage/logs/*.log
    fields:
      app: superadmin
      env: production

output.elasticsearch:
  hosts: ["elasticsearch:9200"]
```

#### 3. å‘Šè­¦è§„åˆ™

```yaml
# docker/prometheus-rules.yml
groups:
  - name: superadmin
    rules:
      # APIé”™è¯¯ç‡å‘Šè­¦
      - alert: HighErrorRate
        expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "APIé”™è¯¯ç‡è¿‡é«˜"

      # å“åº”æ—¶é—´å‘Šè­¦
      - alert: SlowResponse
        expr: http_request_duration_seconds{quantile="0.95"} > 1
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: "APIå“åº”æ—¶é—´è¿‡é•¿"

      # æ•°æ®åº“è¿æ¥å‘Šè­¦
      - alert: DatabaseConnectionFailure
        expr: mysql_up == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "æ•°æ®åº“è¿æ¥å¤±è´¥"
```

---

## 9. æ”¹è¿›å»ºè®®ä¼˜å…ˆçº§

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å®æ–½ï¼‰

1. **è¡¥å……æµ‹è¯•ç”¨ä¾‹**
   - ç›®æ ‡: Serviceå±‚æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°80%
   - é¢„è®¡å·¥ä½œé‡: 2-3å‘¨
   - å½±å“: ä¿éšœä»£ç è´¨é‡ï¼Œå‡å°‘ç”Ÿäº§Bug

2. **å®Œå–„CI/CDæµç¨‹**
   - é…ç½®GitHub Actionsè‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²
   - é¢„è®¡å·¥ä½œé‡: 1å‘¨
   - å½±å“: æå‡éƒ¨ç½²æ•ˆç‡å’Œå¯é æ€§

3. **APIæ–‡æ¡£ç”Ÿæˆ**
   - ä½¿ç”¨Swaggeræ³¨è§£ç”ŸæˆAPIæ–‡æ¡£
   - é¢„è®¡å·¥ä½œé‡: 1å‘¨
   - å½±å“: æå‡å‰åç«¯åä½œæ•ˆç‡

4. **æ€§èƒ½ç›‘æ§**
   - é›†æˆSentry APMç›‘æ§
   - é¢„è®¡å·¥ä½œé‡: 3å¤©
   - å½±å“: åŠæ—¶å‘ç°å’Œè§£å†³æ€§èƒ½é—®é¢˜

---

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆ3ä¸ªæœˆå†…ï¼‰

1. **ä¼˜åŒ–æ•°æ®åº“è®¾è®¡**
   - æ·»åŠ å¿…è¦çš„ç´¢å¼•
   - ä¼˜åŒ–æ…¢æŸ¥è¯¢
   - é¢„è®¡å·¥ä½œé‡: 1-2å‘¨

2. **å¢å¼ºç¼“å­˜ç­–ç•¥**
   - å®ç°å¤šçº§ç¼“å­˜
   - æ·»åŠ ç¼“å­˜é¢„çƒ­
   - é¢„è®¡å·¥ä½œé‡: 1å‘¨

3. **å®‰å…¨åŠ å›º**
   - æ·»åŠ APIç­¾åéªŒè¯
   - å®ç°å¤šå› ç´ è®¤è¯(MFA)
   - é¢„è®¡å·¥ä½œé‡: 2å‘¨

4. **å‰ç«¯æ€§èƒ½ä¼˜åŒ–**
   - SSRæ”¯æŒ
   - PWAç¦»çº¿è®¿é—®
   - é¢„è®¡å·¥ä½œé‡: 2-3å‘¨

---

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆ6ä¸ªæœˆå†…ï¼‰

1. **å¾®æœåŠ¡æ‹†åˆ†**
   - æŒ‰ä¸šåŠ¡é¢†åŸŸæ‹†åˆ†æœåŠ¡
   - å¼•å…¥æœåŠ¡ç½‘æ ¼
   - é¢„è®¡å·¥ä½œé‡: 1-2ä¸ªæœˆ

2. **å›½é™…åŒ–æ”¯æŒ**
   - å®Œå–„å¤šè¯­è¨€æ”¯æŒ
   - æ—¶åŒºå¤„ç†ä¼˜åŒ–
   - é¢„è®¡å·¥ä½œé‡: 2å‘¨

3. **ç§»åŠ¨ç«¯é€‚é…**
   - ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ
   - è€ƒè™‘å¼€å‘ç‹¬ç«‹ç§»åŠ¨åº”ç”¨
   - é¢„è®¡å·¥ä½œé‡: 1ä¸ªæœˆ

---

## 10. æ€»ç»“ä¸å±•æœ›

### 10.1 æ¶æ„ä¼˜åŠ¿æ€»ç»“

SuperAdmin æ˜¯ä¸€ä¸ª**æ¶æ„è®¾è®¡ä¼˜ç§€**çš„ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿï¼š

1. âœ… **æŠ€æœ¯æ ˆé¢†å…ˆ**: Vue 3.5.22 + ThinkPHP 8.1 + TypeScript 5.7
2. âœ… **æ¶æ„æ¸…æ™°**: å‰åç«¯åˆ†ç¦» + åˆ†å±‚æ¶æ„ + æœåŠ¡å±‚è®¾è®¡
3. âœ… **å®‰å…¨å®Œå–„**: JWT + é™æµ + XSS/CSRFé˜²æŠ¤ + å®‰å…¨å¤´
4. âœ… **æ€§èƒ½ä¼˜è¶Š**: å¸¸é©»å†…å­˜ + Redisç¼“å­˜ + ä»£ç åˆ†å‰²
5. âœ… **å¯ç»´æŠ¤æ€§å¼º**: æ¨¡å—åŒ–è®¾è®¡ + ä»£ç è§„èŒƒ + æ–‡æ¡£å®Œå–„

---

### 10.2 å…³é”®æ”¹è¿›æ–¹å‘

ä¸ºäº†è¿›ä¸€æ­¥æå‡é¡¹ç›®è´¨é‡ï¼Œå»ºè®®é‡ç‚¹å…³æ³¨ï¼š

1. ğŸ¯ **æµ‹è¯•è¦†ç›–ç‡**: ä»5%æå‡åˆ°80%
2. ğŸ¯ **CI/CDè‡ªåŠ¨åŒ–**: å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²
3. ğŸ¯ **ç›‘æ§å‘Šè­¦**: å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»
4. ğŸ¯ **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤APIæ–‡æ¡£

---

### 10.3 æ¶æ„æ¼”è¿›è·¯çº¿å›¾

```
2025 Q1-Q2: å¤¯å®åŸºç¡€
â”œâ”€ è¡¥å……æµ‹è¯•ç”¨ä¾‹ï¼ˆ80%è¦†ç›–ç‡ï¼‰
â”œâ”€ å®Œå–„CI/CDæµç¨‹
â”œâ”€ å»ºç«‹ç›‘æ§å‘Šè­¦ä½“ç³»
â””â”€ æ€§èƒ½ä¼˜åŒ–ï¼ˆæ•°æ®åº“ç´¢å¼•ã€ç¼“å­˜ç­–ç•¥ï¼‰

2025 Q3-Q4: èƒ½åŠ›æå‡
â”œâ”€ APIæ–‡æ¡£è‡ªåŠ¨åŒ–
â”œâ”€ å®‰å…¨åŠ å›ºï¼ˆMFAã€APIç­¾åï¼‰
â”œâ”€ å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼ˆSSRã€PWAï¼‰
â””â”€ æ—¥å¿—èšåˆå’Œåˆ†æ

2026å¹´: æ¶æ„å‡çº§
â”œâ”€ å¾®æœåŠ¡æ‹†åˆ†ï¼ˆæŒ‰ä¸šåŠ¡åŸŸï¼‰
â”œâ”€ æœåŠ¡ç½‘æ ¼ï¼ˆIstioï¼‰
â”œâ”€ æ¶ˆæ¯é©±åŠ¨æ¶æ„ï¼ˆRabbitMQ/Kafkaï¼‰
â””â”€ å¤šäº‘éƒ¨ç½²ï¼ˆKubernetesï¼‰
```

---

### 10.4 æœ€ç»ˆè¯„ä»·

SuperAdmin **å½“å‰å·²ç»æ˜¯ä¸€ä¸ªç”Ÿäº§å¯ç”¨çš„ä¼˜ç§€ç³»ç»Ÿ**ï¼Œå…·å¤‡ï¼š
- â­â­â­â­â­ é¡¶çº§çš„å®‰å…¨æ€§
- â­â­â­â­â­ ä¼˜ç§€çš„æŠ€æœ¯é€‰å‹
- â­â­â­â­â˜† è‰¯å¥½çš„æ¶æ„è®¾è®¡
- â­â­â­â˜†â˜† æœ‰å¾…æå‡çš„æµ‹è¯•è¦†ç›–ç‡
- â­â­â­â˜†â˜† æœ‰å¾…å®Œå–„çš„è¿ç»´ä½“ç³»

**ç»¼åˆè¯„åˆ†**: â­â­â­â­â˜† **4.25/5 (ä¼˜ç§€)**

é€šè¿‡å®æ–½æœ¬æŠ¥å‘Šçš„æ”¹è¿›å»ºè®®ï¼Œé¡¹ç›®æœ‰æœ›è¾¾åˆ°ï¼š
- **â­â­â­â­â­ 5/5 (å“è¶Š)** çš„ç»¼åˆè¯„åˆ†

---

**æŠ¥å‘Šç»“æŸ**

*è¯„ä¼°äºº: æ¶æ„å¸ˆ*
*æ—¥æœŸ: 2025-10-26*
*ç‰ˆæœ¬: v1.0*
